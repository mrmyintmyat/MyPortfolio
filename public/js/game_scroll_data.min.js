$(document).ready(function(){function e(e){if(!c){c=!0;var a=window.location.pathname.split("/").pop(),i=a[a.length-1];$.ajax({type:"GET",url:e,data:{page:n,search_nextPage:h,query:s,category:a||null,user_id:i||null},beforeSend:function(){$(".auto-load").show(),$(".error-message").hide(),$(".search-auto-load").show(),$(".search-error-message").hide()},success:function(a){a.length>0?setTimeout(()=>{$(".auto-load").hide(),$(".search-auto-load").hide(),$("#item_container").append(a),n++,c=!1},1500):r&&a&&a.html&&a.html.length>0?setTimeout(()=>{$(".auto-load").hide(),$(".search-auto-load").hide(),$("#item_container_search").append(a.html),h++,c=!1,r=!1},1500):setTimeout(()=>{$(".error-message").html('<div class=" text-info"><i class="fa-solid fa-magnifying-glass mb-2 me-2"></i>No more games</div> '),$(".search-error-message").html('<div class=" text-info"><i class="fa-solid fa-magnifying-glass mb-2 me-2"></i>No more games</div> '),$(".error-message").show(),$(".search-error-message").show(),$(".auto-load").hide(),$(".search-auto-load").hide(),"/"===e?t=!0:"/games/search"===e&&(o=!0),c=!1,r=!1},1500)},error:function(e,a,s){c=!1,$(".auto-load").hide(),$(".search-auto-load").hide()}})}}function a(a,s){var i=$(a),n=i.scrollTop(),h=i.prop("scrollHeight"),c=i.height();n+c+49>=h&&(navigator.onLine?"/games/search"===s&&!1===o?(r=!0,e(s)):"/"===s&&!1===t&&e(s):($(".error-message").html('<div class=" text-danger">\n<i class="fa-solid fa-triangle-exclamation fa-fade"></i>Connection Error\n</div> '),$(".error-message").show()))}let s,r=!1,o=!1,t=!1;var i=new URLSearchParams(window.location.search).get("page"),n=i?parseInt(i)+1:2,h=2,c=!1;$("#searchForm").submit(function(e){e.preventDefault()}),$("#search").keyup(function(e){o=!1;var a=$(this).val();s=a;var r=a.length,t=$('meta[name="csrf-token"]').attr("content");0!=r?$.ajax({type:"POST",url:"/games/search",data:{_token:t,query:a},beforeSend:function(){$("#item_container_search").empty(),$(".search_scroll_page").show(),$(".scroll_page").hide(),$(".game_detail_hide").hide(),$(".search-error-message").hide(),$(".search-auto-load").show()},success:function(e){if(e.html.length>0){$(".search_scroll_page").show(),$(".search-auto-load").hide(),$(".search-error-message").hide();var a=$("#item_container_search");a.empty(),a.append(e.html)}else{a=$("#item_container_search");a.empty(),$(".search-error-message").html('<div class=" text-info"><i class="fa-solid fa-magnifying-glass fa-spin fa-spin-reverse me-2"></i>No more games found</div> '),$(".search-error-message").show(),$(".search-auto-load").hide()}},error:function(e,a,s){console.log(s)}}):($(".search_scroll_page").hide(),$(".search-error-message").hide(),$(".scroll_page").show(),$(".game_detail_hide").show(),h=2)}),$(".scroll_page").scroll(function(){a(this,"/")}),$(".search_scroll_page").scroll(function(){a(this,"/games/search")})});